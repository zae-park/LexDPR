mode: bi
out_dir: checkpoint/lexdpr
seed: 42

# 테스트 실행 모드 (true로 설정 시 1 epoch 또는 100 iteration만 실행)
test_run: false

trainer:
  epochs: 1
  lr: 2e-5
  use_amp: true
  temperature: 0.05
  eval_pairs: data/pairs_eval.jsonl
  eval_steps: 300
  k: 10
  k_values: [1,3,5,10]
  gradient_accumulation_steps: 8  # 배치 사이즈 1일 때 효과적인 배치 크기 = 1 * 8 = 8
  gradient_checkpointing: false   # PEFT 모델과 호환성 문제로 일단 비활성화

data:
  passages: data/merged_corpus.jsonl
  pairs: data/pairs_train.jsonl
  batches:
    bi: 4              # 메모리 절약: 1로 설정하고 gradient_accumulation_steps 사용
  multiply: 0           # 필요 시 10 같이 키워 샘플 증폭

# 웹 로깅 설정 (선택사항)
# 단일 서비스 사용:
# web_logging:
#   service: wandb  # neptune, wandb, mlflow 중 선택
#   token: ${WANDB_API_KEY}  # 환경 변수 참조 또는 직접 입력
#   project: lexdpr
#   name: experiment-001  # 실행 이름 (선택사항)
#
# 여러 서비스 동시 사용:
# web_logging:
#   - service: wandb
#     token: ${WANDB_API_KEY}
#     project: lexdpr
#     name: experiment-001
#   - service: neptune
#     token: ${NEPTUNE_API_TOKEN}
#     project: username/project-name
#     name: experiment-001
#   - service: mlflow
#     token: ${MLFLOW_TRACKING_TOKEN}  # 선택사항
#     tracking_uri: http://localhost:5000
#     experiment_name: lexdpr
#     run_name: experiment-001

