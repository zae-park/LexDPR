name: ğŸ”„ Auto Mirror to Organization Repo

on:
  push:
    branches:
      - '**'
    tags:
      - '**'

jobs:
  mirror_repo:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout Source Repository (Full History)
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ğŸ”— Mirror to Organization Repo
        env:
          ORG_TOKEN: ${{ secrets.ORG_REPO_TOKEN }}
        run: |
          # í† í° í™•ì¸
          if [ -z "$ORG_TOKEN" ]; then
            echo "âŒ ORG_REPO_TOKEN is not set"
            exit 1
          fi
          
          HOST="github.com"
          REPO_PATH="richer4p/LexDPR.git"
          NEW_REMOTE="https://zae-park:${ORG_TOKEN}@${HOST}/${REPO_PATH}"
          
          echo "ğŸ¯ Target repository: https://${HOST}/${REPO_PATH}"
          
          # ì›ê²© ì €ì¥ì†Œ ì¶”ê°€
          git remote add org-mirror "$NEW_REMOTE"
          
          echo "ğŸ”„ Mirroring all branches and tags..."
          git push org-mirror --mirror
          
          echo "âœ… Mirroring complete!"